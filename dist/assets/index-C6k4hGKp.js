(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const mr="modulepreload",br=function(t){return"/"+t},Dn={},yr=function(e,r,i){let n=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var o=u;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");n=u(r.map(d=>{if(d=br(d),d in Dn)return;Dn[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const E=document.createElement("link");if(E.rel=f?"stylesheet":mr,f||(E.as="script"),E.crossOrigin="",E.href=d,c&&E.setAttribute("nonce",c),document.head.appendChild(E),f)return new Promise((T,v)=>{E.addEventListener("load",T),E.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return n.then(l=>{for(const c of l||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},qn="coder_files",M={getFiles:function(){const t=localStorage.getItem(qn);return t?JSON.parse(t):{}},saveFiles:function(t){localStorage.setItem(qn,JSON.stringify(t))},getFile:function(t){return this.getFiles()[t]||null},saveFile:function(t,e){const r=this.getFiles();r[t]=e,this.saveFiles(r)},deleteFile:function(t){const e=this.getFiles();return e[t]!==void 0?(delete e[t],this.saveFiles(e),!0):!1},renameFile:function(t,e){const r=this.getFiles();return r[t]!==void 0&&r[e]===void 0?(r[e]=r[t],delete r[t],this.saveFiles(r),!0):!1}};function kr(){const t=M.getFiles();return Object.keys(t).length===0?(console.log("No files found in localStorage. Starting with an empty workspace."),{}):t}function an(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Me=an();function ii(t){Me=t}var Xe={exec:()=>null};function L(t,e=""){let r=typeof t=="string"?t:t.source,i={replace:(n,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Z.caret,"$1"),r=r.replace(n,o),i},getRegex:()=>new RegExp(r,e)};return i}var Z={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},wr=/^(?:[ \t]*(?:\n|$))+/,xr=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Er=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,et=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Sr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ln=/(?:[*+-]|\d{1,9}[.)])/,ri=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,si=L(ri).replace(/bull/g,ln).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),vr=L(ri).replace(/bull/g,ln).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),cn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_r=/^[^\n]+/,un=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Tr=L(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",un).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ar=L(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ln).getRegex(),Nt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",dn=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Rr=L("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",dn).replace("tag",Nt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),oi=L(cn).replace("hr",et).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Nt).getRegex(),Nr=L(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",oi).getRegex(),pn={blockquote:Nr,code:xr,def:Tr,fences:Er,heading:Sr,hr:et,html:Rr,lheading:si,list:Ar,newline:wr,paragraph:oi,table:Xe,text:_r},Un=L("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",et).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Nt).getRegex(),Ir={...pn,lheading:vr,table:Un,paragraph:L(cn).replace("hr",et).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Un).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Nt).getRegex()},Cr={...pn,html:L(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",dn).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:L(cn).replace("hr",et).replace("heading",` *#{1,6} *[^
]`).replace("lheading",si).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Mr=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Lr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ai=/^( {2,}|\\)\n(?!\s*$)/,Or=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,It=/[\p{P}\p{S}]/u,fn=/[\s\p{P}\p{S}]/u,li=/[^\s\p{P}\p{S}]/u,$r=L(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,fn).getRegex(),ci=/(?!~)[\p{P}\p{S}]/u,Br=/(?!~)[\s\p{P}\p{S}]/u,Fr=/(?:[^\s\p{P}\p{S}]|~)/u,zr=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,ui=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Pr=L(ui,"u").replace(/punct/g,It).getRegex(),Dr=L(ui,"u").replace(/punct/g,ci).getRegex(),di="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",qr=L(di,"gu").replace(/notPunctSpace/g,li).replace(/punctSpace/g,fn).replace(/punct/g,It).getRegex(),Ur=L(di,"gu").replace(/notPunctSpace/g,Fr).replace(/punctSpace/g,Br).replace(/punct/g,ci).getRegex(),Hr=L("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,li).replace(/punctSpace/g,fn).replace(/punct/g,It).getRegex(),jr=L(/\\(punct)/,"gu").replace(/punct/g,It).getRegex(),Gr=L(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Wr=L(dn).replace("(?:-->|$)","-->").getRegex(),Kr=L("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Wr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),yt=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Zr=L(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",yt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),pi=L(/^!?\[(label)\]\[(ref)\]/).replace("label",yt).replace("ref",un).getRegex(),fi=L(/^!?\[(ref)\](?:\[\])?/).replace("ref",un).getRegex(),Jr=L("reflink|nolink(?!\\()","g").replace("reflink",pi).replace("nolink",fi).getRegex(),hn={_backpedal:Xe,anyPunctuation:jr,autolink:Gr,blockSkip:zr,br:ai,code:Lr,del:Xe,emStrongLDelim:Pr,emStrongRDelimAst:qr,emStrongRDelimUnd:Hr,escape:Mr,link:Zr,nolink:fi,punctuation:$r,reflink:pi,reflinkSearch:Jr,tag:Kr,text:Or,url:Xe},Xr={...hn,link:L(/^!?\[(label)\]\((.*?)\)/).replace("label",yt).getRegex(),reflink:L(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yt).getRegex()},Gt={...hn,emStrongRDelimAst:Ur,emStrongLDelim:Dr,url:L(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Qr={...Gt,br:L(ai).replace("{2,}","*").getRegex(),text:L(Gt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ft={normal:pn,gfm:Ir,pedantic:Cr},He={normal:hn,gfm:Gt,breaks:Qr,pedantic:Xr},Yr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hn=t=>Yr[t];function se(t,e){if(e){if(Z.escapeTest.test(t))return t.replace(Z.escapeReplace,Hn)}else if(Z.escapeTestNoEncode.test(t))return t.replace(Z.escapeReplaceNoEncode,Hn);return t}function jn(t){try{t=encodeURI(t).replace(Z.percentDecode,"%")}catch{return null}return t}function Gn(t,e){let r=t.replace(Z.findPipe,(s,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),i=r.split(Z.splitPipe),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(Z.slashPipe,"|");return i}function je(t,e,r){let i=t.length;if(i===0)return"";let n=0;for(;n<i&&t.charAt(i-n-1)===e;)n++;return t.slice(0,i-n)}function Vr(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return r>0?-2:-1}function Wn(t,e,r,i,n){let s=e.href,o=e.title||null,l=t[1].replace(n.other.outputLinkReplace,"$1");i.state.inLink=!0;let c={type:t[0].charAt(0)==="!"?"image":"link",raw:r,href:s,title:o,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,c}function es(t,e,r){let i=t.match(r.other.indentCodeCompensation);if(i===null)return e;let n=i[1];return e.split(`
`).map(s=>{let o=s.match(r.other.beginningSpace);if(o===null)return s;let[l]=o;return l.length>=n.length?s.slice(n.length):s}).join(`
`)}var kt=class{options;rules;lexer;constructor(t){this.options=t||Me}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let r=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:je(r,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let r=e[0],i=es(r,e[3]||"",this.rules);return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(this.rules.other.endingHash.test(r)){let i=je(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:je(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let r=je(e[0],`
`).split(`
`),i="",n="",s=[];for(;r.length>0;){let o=!1,l=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),o=!0;else if(!o)l.push(r[c]);else break;r=r.slice(c);let u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,n=n?`${n}
${d}`:d;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=f,r.length===0)break;let h=s.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let E=h,T=E.raw+`
`+r.join(`
`),v=this.blockquote(T);s[s.length-1]=v,i=i.substring(0,i.length-E.raw.length)+v.raw,n=n.substring(0,n.length-E.text.length)+v.text;break}else if(h?.type==="list"){let E=h,T=E.raw+`
`+r.join(`
`),v=this.list(T);s[s.length-1]=v,i=i.substring(0,i.length-h.raw.length)+v.raw,n=n.substring(0,n.length-E.raw.length)+v.raw,r=T.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r=e[1].trim(),i=r.length>1,n={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let s=this.rules.other.listItemRegex(r),o=!1;for(;t;){let c=!1,u="",d="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;u=e[0],t=t.substring(u.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,N=>" ".repeat(3*N.length)),h=t.split(`
`,1)[0],E=!f.trim(),T=0;if(this.options.pedantic?(T=2,d=f.trimStart()):E?T=e[1].length+1:(T=e[2].search(this.rules.other.nonSpaceChar),T=T>4?1:T,d=f.slice(T),T+=e[1].length),E&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,t=t.substring(h.length+1),c=!0),!c){let N=this.rules.other.nextBulletRegex(T),F=this.rules.other.hrRegex(T),ae=this.rules.other.fencesBeginRegex(T),Y=this.rules.other.headingBeginRegex(T),J=this.rules.other.htmlBeginRegex(T);for(;t;){let W=t.split(`
`,1)[0],V;if(h=W,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),V=h):V=h.replace(this.rules.other.tabCharGlobal,"    "),ae.test(h)||Y.test(h)||J.test(h)||N.test(h)||F.test(h))break;if(V.search(this.rules.other.nonSpaceChar)>=T||!h.trim())d+=`
`+V.slice(T);else{if(E||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ae.test(f)||Y.test(f)||F.test(f))break;d+=`
`+h}!E&&!h.trim()&&(E=!0),u+=W+`
`,t=t.substring(W.length+1),f=V.slice(T)}}n.loose||(o?n.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let v=null,q;this.options.gfm&&(v=this.rules.other.listIsTask.exec(d),v&&(q=v[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:u,task:!!v,checked:q,loose:!1,text:d,tokens:[]}),n.raw+=u}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let c=0;c<n.items.length;c++)if(this.lexer.state.top=!1,n.items[c].tokens=this.lexer.blockTokens(n.items[c].text,[]),!n.loose){let u=n.items[c].tokens.filter(f=>f.type==="space"),d=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));n.loose=d}if(n.loose)for(let c=0;c<n.items.length;c++)n.items[c].loose=!0;return n}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let r=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:i,title:n}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let r=Gn(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let o of i)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<r.length;o++)s.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:s.align[o]});for(let o of n)s.rows.push(Gn(o,s.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[c]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let r=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let r=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let s=je(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{let s=Vr(e[2],"()");if(s===-2)return;if(s>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let i=e[2],n="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],n=s[3])}else n=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),Wn(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=e[i.toLowerCase()];if(!n){let s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Wn(r,n,r[0],this.lexer,this.rules)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let n=[...i[0]].length-1,s,o,l=n,c=0,u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*t.length+n);(i=u.exec(e))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(o=[...s].length,i[3]||i[4]){l+=o;continue}else if((i[5]||i[6])&&n%3&&!((n+o)%3)){c+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+c);let d=[...i[0]][0].length,f=t.slice(0,n+i.index+d+o);if(Math.min(n,o)%2){let E=f.slice(1,-1);return{type:"em",raw:f,text:E,tokens:this.lexer.inlineTokens(E)}}let h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),n=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&n&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:e[0],text:r}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let r,i;return e[2]==="@"?(r=e[1],i="mailto:"+r):(r=e[1],i=r),{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let r,i;if(e[2]==="@")r=e[0],i="mailto:"+r;else{let n;do n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(n!==e[0]);r=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let r=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:r}}}},ue=class Wt{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Me,this.options.tokenizer=this.options.tokenizer||new kt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Z,block:ft.normal,inline:He.normal};this.options.pedantic?(r.block=ft.pedantic,r.inline=He.pedantic):this.options.gfm&&(r.block=ft.gfm,this.options.breaks?r.inline=He.breaks:r.inline=He.gfm),this.tokenizer.rules=r}static get rules(){return{block:ft,inline:He}}static lex(e,r){return new Wt(r).lex(e)}static lexInline(e,r){return new Wt(r).inlineTokens(e)}lex(e){e=e.replace(Z.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],i=!1){for(this.options.pedantic&&(e=e.replace(Z.tabCharGlobal,"    ").replace(Z.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(o=>(n=o.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let o=r.at(-1);n.raw.length===1&&o!==void 0?o.raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.at(-1).src=o.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){let o=r.at(-1);i&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):r.push(n),i=s.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):r.push(n);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let i=e,n=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},e,r))?(e=e.substring(l.raw.length),r.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let u=r.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):r.push(l);continue}if(l=this.tokenizer.emStrong(e,i,o)){e=e.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),r.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),r.push(l);continue}let c=e;if(this.options.extensions?.startInline){let u=1/0,d=e.slice(1),f;this.options.extensions.startInline.forEach(h=>{f=h.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(c=e.substring(0,u+1))}if(l=this.tokenizer.inlineText(c)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),s=!0;let u=r.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):r.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}},wt=class{options;parser;constructor(t){this.options=t||Me}space(t){return""}code({text:t,lang:e,escaped:r}){let i=(e||"").match(Z.notSpaceStart)?.[0],n=t.replace(Z.endingNewline,"")+`
`;return i?'<pre><code class="language-'+se(i)+'">'+(r?n:se(n,!0))+`</code></pre>
`:"<pre><code>"+(r?n:se(n,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,r=t.start,i="";for(let o=0;o<t.items.length;o++){let l=t.items[o];i+=this.listitem(l)}let n=e?"ol":"ul",s=e&&r!==1?' start="'+r+'"':"";return"<"+n+s+`>
`+i+"</"+n+`>
`}listitem(t){let e="";if(t.task){let r=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+se(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",r="";for(let n=0;n<t.header.length;n++)r+=this.tablecell(t.header[n]);e+=this.tablerow({text:r});let i="";for(let n=0;n<t.rows.length;n++){let s=t.rows[n];r="";for(let o=0;o<s.length;o++)r+=this.tablecell(s[o]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${se(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:r}){let i=this.parser.parseInline(r),n=jn(t);if(n===null)return i;t=n;let s='<a href="'+t+'"';return e&&(s+=' title="'+se(e)+'"'),s+=">"+i+"</a>",s}image({href:t,title:e,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let n=jn(t);if(n===null)return se(r);t=n;let s=`<img src="${t}" alt="${r}"`;return e&&(s+=` title="${se(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:se(t.text)}},gn=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},de=class Kt{options;renderer;textRenderer;constructor(e){this.options=e||Me,this.options.renderer=this.options.renderer||new wt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new gn}static parse(e,r){return new Kt(r).parse(e)}static parseInline(e,r){return new Kt(r).parseInline(e)}parse(e,r=!0){let i="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions?.renderers?.[s.type]){let l=s,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){i+=c||"";continue}}let o=s;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let l=o,c=this.renderer.text(l);for(;n+1<e.length&&e[n+1].type==="text";)l=e[++n],c+=`
`+this.renderer.text(l);r?i+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):i+=c;continue}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}parseInline(e,r=this.renderer){let i="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions?.renderers?.[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=l||"";continue}}let o=s;switch(o.type){case"escape":{i+=r.text(o);break}case"html":{i+=r.html(o);break}case"link":{i+=r.link(o);break}case"image":{i+=r.image(o);break}case"strong":{i+=r.strong(o);break}case"em":{i+=r.em(o);break}case"codespan":{i+=r.codespan(o);break}case"br":{i+=r.br(o);break}case"del":{i+=r.del(o);break}case"text":{i+=r.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},gt=class{options;block;constructor(t){this.options=t||Me}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?ue.lex:ue.lexInline}provideParser(){return this.block?de.parse:de.parseInline}},ts=class{defaults=an();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=de;Renderer=wt;TextRenderer=gn;Lexer=ue;Tokenizer=kt;Hooks=gt;constructor(...t){this.use(...t)}walkTokens(t,e){let r=[];for(let i of t)switch(r=r.concat(e.call(this,i)),i.type){case"table":{let n=i;for(let s of n.header)r=r.concat(this.walkTokens(s.tokens,e));for(let s of n.rows)for(let o of s)r=r.concat(this.walkTokens(o.tokens,e));break}case"list":{let n=i;r=r.concat(this.walkTokens(n.items,e));break}default:{let n=i;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(s=>{let o=n[s].flat(1/0);r=r.concat(this.walkTokens(o,e))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,e)))}}return r}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let s=e.renderers[n.name];s?e.renderers[n.name]=function(...o){let l=n.renderer.apply(this,o);return l===!1&&(l=s.apply(this,o)),l}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[n.level];s?s.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),i.extensions=e),r.renderer){let n=this.defaults.renderer||new wt(this.defaults);for(let s in r.renderer){if(!(s in n))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,l=r.renderer[o],c=n[o];n[o]=(...u)=>{let d=l.apply(n,u);return d===!1&&(d=c.apply(n,u)),d||""}}i.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new kt(this.defaults);for(let s in r.tokenizer){if(!(s in n))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,l=r.tokenizer[o],c=n[o];n[o]=(...u)=>{let d=l.apply(n,u);return d===!1&&(d=c.apply(n,u)),d}}i.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new gt;for(let s in r.hooks){if(!(s in n))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,l=r.hooks[o],c=n[o];gt.passThroughHooks.has(s)?n[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(n,u)).then(f=>c.call(n,f));let d=l.call(n,u);return c.call(n,d)}:n[o]=(...u)=>{let d=l.apply(n,u);return d===!1&&(d=c.apply(n,u)),d}}i.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(o){let l=[];return l.push(s.call(this,o)),n&&(l=l.concat(n.call(this,o))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return ue.lex(t,e??this.defaults)}parser(t,e){return de.parse(t,e??this.defaults)}parseMarkdown(t){return(e,r)=>{let i={...r},n={...this.defaults,...i},s=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=t);let o=n.hooks?n.hooks.provideLexer():t?ue.lex:ue.lexInline,l=n.hooks?n.hooks.provideParser():t?de.parse:de.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(e):e).then(c=>o(c,n)).then(c=>n.hooks?n.hooks.processAllTokens(c):c).then(c=>n.walkTokens?Promise.all(this.walkTokens(c,n.walkTokens)).then(()=>c):c).then(c=>l(c,n)).then(c=>n.hooks?n.hooks.postprocess(c):c).catch(s);try{n.hooks&&(e=n.hooks.preprocess(e));let c=o(e,n);n.hooks&&(c=n.hooks.processAllTokens(c)),n.walkTokens&&this.walkTokens(c,n.walkTokens);let u=l(c,n);return n.hooks&&(u=n.hooks.postprocess(u)),u}catch(c){return s(c)}}}onError(t,e){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let i="<p>An error occurred:</p><pre>"+se(r.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(r);throw r}}},Ce=new ts;function C(t,e){return Ce.parse(t,e)}C.options=C.setOptions=function(t){return Ce.setOptions(t),C.defaults=Ce.defaults,ii(C.defaults),C};C.getDefaults=an;C.defaults=Me;C.use=function(...t){return Ce.use(...t),C.defaults=Ce.defaults,ii(C.defaults),C};C.walkTokens=function(t,e){return Ce.walkTokens(t,e)};C.parseInline=Ce.parseInline;C.Parser=de;C.parser=de.parse;C.Renderer=wt;C.TextRenderer=gn;C.Lexer=ue;C.lexer=ue.lex;C.Tokenizer=kt;C.Hooks=gt;C.parse=C;C.options;C.setOptions;C.use;C.walkTokens;C.parseInline;de.parse;ue.lex;const Ge=4e3;function ns(t){const e=[],r=[],i=[],n=/(?:function\s*\*?\s+([\w$]+)\s*\(|class\s+([\w$]+)[\s{]|(?:const|let|var)\s+([\w$]+)\s*=\s*(?:async\s+)?(?:function|\([^)]*\)\s*=>|class))/g;let s;for(;(s=n.exec(t))!==null;){const c=s[1]||s[2]||s[3];c&&e.push(c)}const o=/import(?:[\s\S]*?from\s*)?['"]([^'"]+)['"]/g;for(;(s=o.exec(t))!==null;)r.push(s[0]);const l=/export\s+(?:(?:\{[^}]*\}|default|function|class|const|let|var)\s+([\w$]+)|(?:\*|\{[^}]*\})\s+from\s+['"]([^'"]+)['"])/g;for(;(s=l.exec(t))!==null;){const c=s[1]||(s[2]?`from '${s[2]}'`:s[0]);c&&i.push(s[0].startsWith("export ")?s[0]:`export ${c}`)}return{symbols:[...new Set(e)],imports:[...new Set(r)],exports:[...new Set(i)]}}function is(t,e){console.log("Gathering improved context (with dependencies)...");const r=M.getFiles(),i=Object.keys(r);let n={symbols:[],imports:[],exports:[]};if(t&&t.endsWith(".js")&&e)try{n=ns(e),console.log(`Extracted info from ${t}:`,n)}catch(h){console.error(`Error extracting code info from ${t}:`,h)}const s=`## File List (${i.length} files):
${i.join(`
`)}`,o=`

## Active File Path:
${t||"None"}`,l=n.symbols.length>0?`

## Active File Symbols:
${n.symbols.join(", ")}`:"",c=n.imports.length>0?`

## Active File Imports:
${n.imports.join(`
`)}`:"",u=n.exports.length>0?`

## Active File Exports:
${n.exports.join(`
`)}`:"",d=`

## Active File Content:
\`\`\`
${e||"[No active file content]"}
\`\`\`
`;let f=s+o+l+c+u+d;if(f.length>Ge){console.warn(`Context length (${f.length}) exceeds limit (${Ge}). Truncating.`);let h=Ge,T=[o,l,c,u].reduce((N,F)=>N+F.length,0);h-=T;let v=s,q=d;if(h-d.length<s.length){const N=Math.max(0,h-d.length-50);v=s.substring(0,N)+`
... (file list truncated)`}if(h-=v.length,h<d.length){const N=Math.max(0,h-50);q=d.substring(0,N)+"\n... (content truncated)\n```\n"}f=v+o+l+c+u+q,f.length>Ge&&(f=f.substring(0,Ge-20)+"... (heavily truncated)")}return console.log("Context gathering complete."),f}let Fe=null,mt=null,oe=null;function rs(t){Fe=t.initializeUI,mt=t.selectFile,oe=t.addMessageToUI}async function hi(t){let e=null,r=0;if(!Fe||!mt||!oe){console.error("[handleAgenticActions] Dependency functions not set!"),oe&&oe("assistant","Internal Error: Could not execute actions due to missing UI functions.");return}if(!M||typeof M.saveFile!="function"){console.error("[handleAgenticActions] fileStorage is not available or doesn't have a saveFile method!"),oe("assistant","Internal Error: File storage system is not available.");return}if(!Array.isArray(t)||t.length===0){console.warn("[handleAgenticActions] Invalid or empty actions array received:",t);return}for(const i of t)try{if(!i.type)throw new Error('Action missing required "type" field');let n={success:!1,error:"Unknown error"};switch(i.type){case"create_file":if(!i.path||typeof i.content!="string")throw new Error("Missing path or content for file operation");n=await Ei(i.path,i.content),n.success&&(e=i.path,r++);break;case"modify_file":case"update_file":if(!i.path||typeof i.content!="string")throw new Error("Missing path or content for file operation");n=await $s(i.path,i.content),n.success&&(e=i.path,r++);break;case"create_folder":if(!i.path)throw new Error("Missing path for folder operation");n=await Fs(i.path),n.success&&(e=i.path,r++);break;case"delete_file":if(!i.path)throw new Error("Missing path for delete operation");n=await kn(i.path),await Si(i.path),n.success&&r++;break;case"rename_file":if(!i.path||!i.new_path)throw new Error("Missing source or destination path for rename operation");n=await De(i.path,i.new_path),n.success||(n=await De(i.path+".folder",i.new_path+".folder")),n.success&&(e=i.new_path,r++);break;case"move_file":if(!i.path||!i.new_path)throw new Error("Missing source or destination path for move operation");n=await Qe(i.path,i.new_path),n.success||(n=await Qe(i.path+".folder",i.new_path+".folder")),n.success&&(e=i.new_path,r++);break;case"copy_file":if(!i.path||!i.new_path)throw new Error("Missing source or destination path for copy operation");n=await Bs(i.path,i.new_path),n.success&&(e=i.new_path,r++);break;default:console.warn(`[handleAgenticActions] Unknown agentic action type: ${i.type}`),oe("assistant",`Info: Received an unknown action type "${i.type}".`)}!n.success&&n.error&&oe("assistant",`⚠️ Error processing action (${i.type} ${i.path||""}): ${n.error}`)}catch(n){console.error(`[handleAgenticActions] Error executing action: ${JSON.stringify(i)}`,n),oe("assistant",`⚠️ Error processing action (${i.type} ${i.path||""}): ${n.message}`)}r>0?(oe("assistant",`✅ Executed ${r} file action(s).`),Fe&&Fe(),setTimeout(()=>{e&&mt&&mt(e),Fe&&Fe()},300)):(console.log("[handleAgenticActions] No actions were successfully executed."),Array.isArray(t)&&t.length>0&&oe("assistant","Info: No file actions were executed."))}const mn=document.querySelector(".modal-backdrop"),ss=document.querySelector(".modal-dialog"),os=document.querySelector(".modal-title"),as=document.querySelector(".modal-message"),ce=document.querySelector(".modal-input"),xt=document.querySelector(".modal-confirm"),Et=document.querySelector(".modal-cancel"),ls=document.querySelector(".modal-close");let Ze=null;function bn(t){return new Promise(e=>{Ze=e,os.textContent=t.title||"Confirm",as.textContent=t.message||"",t.showInput?(ce.style.display="block",ce.value=t.defaultValue||"",ce.placeholder=t.placeholder||""):ce.style.display="none",xt.textContent=t.confirmText||"OK",Et.textContent=t.cancelText||"Cancel",Et.style.display=t.hideCancel?"none":"inline-block",mn.style.display="flex",t.showInput?(ce.focus(),ce.select()):xt.focus()})}function we(t){mn.style.display="none",Ze&&(ce.style.display==="block"?Ze(t===!1?null:ce.value):Ze(t),Ze=null)}xt.addEventListener("click",()=>we(!0));Et.addEventListener("click",()=>we(!1));ls.addEventListener("click",()=>we(!1));ce.addEventListener("keydown",t=>{t.key==="Enter"?we(!0):t.key==="Escape"&&we(!1)});ss.addEventListener("keydown",t=>{mn.style.display==="flex"&&(t.key==="Escape"?we(!1):t.key==="Enter"&&document.activeElement===xt?we(!0):t.key==="Enter"&&document.activeElement===Et&&we(!1))});async function St(t,e,r="",i=""){return await bn({title:t,message:e,showInput:!0,defaultValue:r,placeholder:i,confirmText:"OK",cancelText:"Cancel"})}async function gi(t,e){return await bn({title:t,message:e,showInput:!1,confirmText:"Yes",cancelText:"No"})}async function Q(t,e){await bn({title:t,message:e,showInput:!1,confirmText:"OK",hideCancel:!0})}class cs{constructor(){this.apiKey=this.getApiKey(),this.baseUrl="https://generativelanguage.googleapis.com/v1beta/models/",this.rateLimits={"gemini-1.5-flash":{perSecond:2,perMinute:60,perDay:5e3},"gemini-1.5-pro":{perSecond:1,perMinute:15,perDay:1500},"gemini-2.0-flash":{perSecond:2,perMinute:60,perDay:5e3},"gemini-2.0-flash-lite":{perSecond:3,perMinute:90,perDay:8e3},"gemini-2.0-flash-thinking":{perSecond:1,perMinute:15,perDay:1500},"gemini-2.0-flash-vision":{perSecond:1,perMinute:30,perDay:3e3},"gemini-2.5-flash":{perSecond:1,perMinute:15,perDay:1500},"gemini-pro":{perSecond:1,perMinute:60,perDay:5e3},"gemini-pro-vision":{perSecond:1,perMinute:60,perDay:5e3}}}getApiKey(){return localStorage.getItem("gemini-api-key")}isApiKeySet(){return!!this.apiKey}async checkRateLimit(e){const r=this.rateLimits[e]||{perSecond:2,perMinute:60,perDay:5e3},n=JSON.parse(localStorage.getItem(`gemini-rate-config-${e}`)||"null")||r,s=Date.now(),o={perSecond:1e3,perMinute:60*1e3,perDay:1440*60*1e3};let l=JSON.parse(localStorage.getItem(`gemini-rate-usage-${e}`)||"[]");const c=s-o.perDay;l=l.filter(d=>d>c);const u={perSecond:l.filter(d=>d>s-o.perSecond).length,perMinute:l.filter(d=>d>s-o.perMinute).length,perDay:l.length};for(const d of["perSecond","perMinute","perDay"]){const f=n[d];if(f&&u[d]>=f)throw new Error(`Rate limit exceeded for ${e}: ${d} limit reached (${u[d]}/${f}).`)}for(const d of["perSecond","perMinute","perDay"]){const f=n[d];if(f&&u[d]>=Math.floor(f*.8)){Q(`Rate limit warning for ${e}: ${d} ${u[d]}/${f}.`,"warning");break}}l.push(s),localStorage.setItem(`gemini-rate-usage-${e}`,JSON.stringify(l))}async generateContent(e,r="gemini-2.5-flash",i=!1){if(!this.isApiKeySet())throw new Error("Gemini API key not set.");await this.checkRateLimit(r);const n=`${this.baseUrl}${r}:${i?"streamGenerateContent":"generateContent"}?key=${this.apiKey}`,o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}]})});if(!o.ok){const l=await o.json();throw new Error(`Gemini API error: ${l.error.message}`)}return o}async generateWithTools({contents:e,tools:r=[],model:i="gemini-2.5-flash",streaming:n=!1,toolConfig:s={}}){if(!this.isApiKeySet())throw new Error("Gemini API key not set.");await this.checkRateLimit(i);const o=`${this.baseUrl}${i}:${n?"streamGenerateContent":"generateContent"}?key=${this.apiKey}`,l={contents:e,tools:r.length>0?[{function_declarations:r}]:void 0,tool_config:r.length>0?{function_calling_config:{mode:"AUTO",...s}}:void 0},c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!c.ok){const u=await c.json();throw new Error(`Gemini API error: ${u.error?.message||"Unknown error"}`)}return n?c:await c.json()}}const yn=new cs,us=Object.freeze(Object.defineProperty({__proto__:null,gemini:yn},Symbol.toStringTag,{value:"Module"}));let Kn,Zn;function ds(t){Kn=t.initializeUI,Zn=t.selectFile,rs({initializeUI:Kn,selectFile:Zn,addMessageToUI:vt})}let Re=null;function vt(t,e){const r=document.querySelector(".ai-messages-container");if(!r)return null;const i=document.createElement("div");i.classList.add("ai-message");const n=document.createElement("p");return n.textContent=e,t==="user"?(i.classList.add("user-message"),i.appendChild(n)):(i.classList.add("assistant-message"),i.innerHTML=`
            <div class="message-extras">
                <div class="planning-section" style="display: none;">
                    <button class="toggle-planning">Show Planning</button>
                    <div class="planning-content" style="display: none;"></div>
                </div>
                <div class="web-search-results" style="display: none;">
                    <h4>Web Search Results:</h4>
                    <ul></ul>
                </div>
            </div>
            <div class="main-message-content"></div>
        `,i.querySelector(".main-message-content").appendChild(n)),r.appendChild(i),r.scrollTop=r.scrollHeight,i}function ze(t,{planning:e,webResults:r,finalContent:i}){if(!t||typeof C>"u"){t||console.error("updateAssistantMessageUI called with null messageDiv"),typeof C>"u"&&console.error("marked.js is not available");return}const n=t.querySelector(".planning-section"),s=t.querySelector(".planning-content"),o=t.querySelector(".toggle-planning"),l=t.querySelector(".web-search-results"),c=l?.querySelector("ul"),u=t.querySelector(".main-message-content");if(!n||!s||!o||!l||!c||!u){console.error("One or more UI elements missing in assistant message structure.");return}if(e?(s.innerHTML=C.parse(e),n.style.display="block",s.style.display="none",o.textContent="Show Planning",o.onclick=()=>{const d=s.style.display==="none";s.style.display=d?"block":"none",o.textContent=d?"Hide Planning":"Show Planning"}):n.style.display="none",r&&r.length>0?(c.innerHTML="",r.forEach(d=>{const f=document.createElement("li");f.innerHTML=`<a href="${d.url}" target="_blank" title="${d.snippet||""}">${d.title||d.url}</a> ${d.date||""}`,c.appendChild(f)}),l.style.display="block"):l.style.display="none",i)try{u.innerHTML=C.parse(i)}catch(d){console.error("Error parsing Markdown:",d),u.textContent=i}else u.innerHTML=""}async function Jn(){const t=document.querySelector(".ai-input"),e=document.getElementById("ai-mode-select"),r=document.getElementById("ai-model-select"),i=document.querySelector(".editor-pane.active")||document.querySelector(".editor-pane:first-child");if(!t||!e||!r){console.error("AI input, mode selector, or model selector not found.");return}let n=t.value.trim();const s=e.value,o=r.value;try{localStorage.setItem("coder_ai_mode",s),localStorage.setItem("coder_ai_model",o)}catch{}if(!n)return;const l=n.replace(/@web|@think/g,"").trim(),c=l;if(!c)return;vt("user",l),t.value="",Re=vt("assistant","Thinking...");let u=null;if(s==="write"){const d=i?.dataset.filePath||null;let f=null;if(d&&i){const h=i.querySelector(".editor pre code");h?f=h.textContent:console.warn(`Could not find code element in active pane for path: ${d}`)}u=is(d,f)}try{await ps(c,Re,s,o,u)}catch(d){console.error("Error communicating with Gemini API:",d),Re&&(ze(Re,{finalContent:`Error: ${d.message}`}),Re.classList.add("error-message")),Re=null}}async function ps(t,e,r,i,n){const s=document.querySelector(".ai-messages-container");if(e){const N=e.querySelector(".main-message-content");N&&(N.textContent="")}if(r==="write")try{await fs({message:t,assistantMessageDiv:e,modelId:i,workspaceContext:n,messagesContainer:s});return}catch(N){console.warn("Function calling failed, falling back to JSON instructions. Error:",N)}let o=t;r==="write"&&n&&(o=`${`You are in 'write' mode. Analyze the request and the provided context (formatted with Markdown headers: ## File List, ## Active File Path, ## Active File Symbols, ## Active File Content).
Context:
---
${n}
---
Respond ONLY with a JSON object containing an 'actions' array (objects with 'type', 'path', 'content') and an 'explanation' string. Example: { "actions": [{ "type": "create_file", "path": "new.js", "content": "console.log('hello');" }], "explanation": "Created new.js." }`}

User request: ${t}`);const l=await yn.generateContent(o,i,!0);if(!l.body)throw new Error("Streaming response body is null.");const c=l.body.getReader(),u=new TextDecoder;let d="",f="";try{for(;;){const{done:N,value:F}=await c.read();if(N)break;d+=u.decode(F,{stream:!0});try{f=JSON.parse(d).map(J=>J.candidates[0].content.parts[0].text).join(""),ze(e,{finalContent:f}),s&&(s.scrollTop=s.scrollHeight);continue}catch{}const ae=d.split(`
`);for(const Y of ae)if(Y.startsWith("data:")){const J=Y.substring(5).trim();try{const W=JSON.parse(J);if(W.candidates&&W.candidates.length>0){const V=W.candidates[0].content.parts[0].text;f+=V,ze(e,{finalContent:f}),s&&(s.scrollTop=s.scrollHeight)}}catch{}}}}finally{c.closed||c.cancel().catch(N=>console.warn("Error cancelling reader:",N))}try{f=JSON.parse(d).map(F=>F.candidates[0].content.parts[0].text).join(""),ze(e,{finalContent:f}),s&&(s.scrollTop=s.scrollHeight)}catch{}const h=f.trim();let E=null,T=h;const v="```json\n",q="\n```";if(r==="write"&&h.startsWith(v)&&h.endsWith(q)){const N=h.substring(v.length,h.length-q.length);try{const F=JSON.parse(N);F&&Array.isArray(F.actions)&&typeof F.explanation=="string"?(E=F.actions,T=F.explanation):T="⚠️ Error: The response format does not match expected structure. Please try again."}catch{T=`⚠️ Error: Could not parse the AI response as valid JSON. Please try again.
Raw content was:
`+h}}if(ze(e,{finalContent:T}),E)try{await hi(E)}catch(N){console.error("Error executing agentic actions:",N),vt("assistant",`Error executing actions: ${N.message}`)}Re=null}async function fs({message:t,assistantMessageDiv:e,modelId:r,workspaceContext:i,messagesContainer:n}){const s=[{name:"create_file",description:"Create a new file at path with initial content",parameters:{type:"OBJECT",properties:{path:{type:"STRING",description:"Path including file name"},content:{type:"STRING",description:"File contents"}},required:["path","content"]}},{name:"modify_file",description:"Replace the entire content of an existing file",parameters:{type:"OBJECT",properties:{path:{type:"STRING"},content:{type:"STRING"}},required:["path","content"]}},{name:"create_folder",description:"Create a folder (virtual) at the given path",parameters:{type:"OBJECT",properties:{path:{type:"STRING"}},required:["path"]}},{name:"delete_file",description:"Delete a file at path",parameters:{type:"OBJECT",properties:{path:{type:"STRING"}},required:["path"]}},{name:"rename_file",description:"Rename or move a file from path to new_path",parameters:{type:"OBJECT",properties:{path:{type:"STRING"},new_path:{type:"STRING"}},required:["path","new_path"]}},{name:"copy_file",description:"Copy a file from path to new_path",parameters:{type:"OBJECT",properties:{path:{type:"STRING"},new_path:{type:"STRING"}},required:["path","new_path"]}}],o="You are an autonomous coding agent with direct file access tools. Prefer calling the provided functions to make changes. Provide concise rationale as plain text also.",l=`User request: ${t}

Workspace Context:
${i||"[No context]"}`,c=[{role:"user",parts:[{text:o+`

`+l}]}],u=await yn.generateWithTools({contents:c,tools:s,model:r,streaming:!1});let d="";const f=[];try{const E=u.candidates?.[0]?.content?.parts||[];for(const T of E){T.text&&(d+=T.text);const v=T.functionCall||T.function_call;if(v&&v.name){let q={};try{q=typeof v.args=="string"?JSON.parse(v.args):v.args||{}}catch{}const N=hs(v.name,q);N&&f.push(N)}}}catch(h){console.warn("Failed to parse function call response",h)}e&&(ze(e,{finalContent:d||"Applying changes..."}),n&&(n.scrollTop=n.scrollHeight)),f.length>0&&await hi(f)}function hs(t,e){switch(t){case"create_file":return{type:"create_file",path:e.path,content:String(e.content||"")};case"modify_file":return{type:"modify_file",path:e.path,content:String(e.content||"")};case"create_folder":return{type:"create_folder",path:e.path};case"delete_file":return{type:"delete_file",path:e.path};case"rename_file":return{type:"rename_file",path:e.path,new_path:e.new_path};case"copy_file":return{type:"copy_file",path:e.path,new_path:e.new_path};default:return null}}function gs(){let t=document.getElementById("ai-chat-styles");t||(t=document.createElement("style"),t.id="ai-chat-styles",document.head.appendChild(t)),t.textContent=`
        .planning-section {
            background-color: #1e1e1e;
            border-radius: 6px;
            margin-bottom: 10px;
            padding: 8px;
        }
        .toggle-planning {
            background-color: #2b2b2b;
            border: none;
            color: #e0e0e0;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            display: block;
            width: 100%;
            text-align: left;
        }
        .toggle-planning:hover {
            background-color: #3a3a3a;
        }
        .planning-content {
            margin-top: 8px;
            padding: 8px;
            background-color: #252525;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
            color: #a0a0a0;
            max-height: 400px;
            overflow-y: auto;
        }
    `}function ms(){const t=document.querySelector(".send-button"),e=document.querySelector(".ai-input");gs(),t&&e?(t.addEventListener("click",Jn),e.addEventListener("keypress",r=>{r.key==="Enter"&&Jn()})):console.error("Could not find AI send button or input field to attach listeners.")}function mi(t,e,r,i,n){const s=document.querySelector(".ai-messages-container");if(!s)return;const o=document.createElement("div");o.className="ai-message assistant-message";let l=`<div class="diff-view">
        <div class="diff-header">
            <span class="diff-filename"><i class="material-icons" style="font-size:16px;vertical-align:middle;">description</i> ${t}</span>
            <div class="diff-actions">
                <button class="diff-approve" title="Approve"><i class="material-icons">check_circle</i></button>
                <button class="diff-reject" title="Discard"><i class="material-icons">cancel</i></button>
            </div>
        </div>
        <pre class="diff-content">`;if(e===r)l+='<span style="color: #4caf50">No changes</span>';else{const c=e.split(`
`),u=r.split(`
`),d=Math.max(c.length,u.length);for(let f=0;f<d;f++){const h=c[f]||"",E=u[f]||"";h===E?l+=`<div class="diff-same">  ${Ut(h)}</div>`:(h&&(l+=`<div class="diff-del">- ${Ut(h)}</div>`),E&&(l+=`<div class="diff-add">+ ${Ut(E)}</div>`))}}l+="</pre></div>",o.innerHTML=l,s.appendChild(o),s.scrollTop=s.scrollHeight,o.querySelector(".diff-approve").addEventListener("click",()=>{i&&i(),o.querySelector(".diff-actions").innerHTML='<span style="color: #81c784"><i class="material-icons">check_circle</i> Changes approved</span>'}),o.querySelector(".diff-reject").addEventListener("click",()=>{n&&n(),o.querySelector(".diff-actions").innerHTML='<span style="color: #e57373"><i class="material-icons">cancel</i> Changes discarded</span>'})}function Ut(t){return t.replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function xe(t,e=!0){const r=document.querySelector(".ai-messages-container");if(!r)return;const i=document.createElement("div");i.className="ai-message assistant-message";const n=e?"✅":"❌";i.innerHTML=`<p class="file-op-message ${e?"success":"error"}">${n} ${t}</p>`,r.appendChild(i),r.scrollTop=r.scrollHeight}function be(t){const e=t.split(`
`),r=[],i=[];return e.forEach((n,s)=>{const o=n.trim();if(!(!o||o.startsWith("//"))){/^[^{}\s][^;{}]$/.test(o)&&!o.endsWith(";")&&r.push({line:s+1,message:"Missing semicolon",type:"warning"});for(let l of o)l==="{"&&i.push(s+1),l==="}"&&i.pop()}}),i.length>0&&r.push({line:i[i.length-1],message:"Unclosed { bracket",type:"error"}),r}let Zt,Jt,Ye,Xt,Qt,Ne,Yt;function bs(t){Zt=t.selectFile,Jt=t.closeTab,Ye=t.addNewFile,Xt=t.renameFileHandler,Qt=t.deleteFileHandler,Ne=t.updateEditor,Yt=t.updateTheme}const Xn=document.querySelector(".file-list"),_t=document.querySelector(".tabs-container"),ys=document.querySelector(".add-file-btn"),ks=document.querySelector(".settings-btn"),Ht=document.querySelector(".settings-panel"),ws=document.querySelector(".close-settings"),Vt=document.getElementById("theme-selector"),en=document.getElementById("font-size"),tn=document.getElementById("tab-size"),nn=document.getElementById("ai-mode-select"),rn=document.getElementById("ai-model-select"),Ae=document.querySelector(".file-type"),ht=document.querySelector(".file-size"),Ve=document.querySelector(".tab-size"),Je=document.querySelector(".lint-status"),bi=document.querySelector(".cursor-position"),xs=document.querySelector(".search-btn"),We=document.querySelector(".search-panel"),Es=document.querySelector(".close-search"),Ss=document.querySelector(".download-btn"),vs=document.querySelector(".terminal-btn"),Ke=document.querySelector(".terminal-panel"),_s=document.querySelector(".close-terminal"),Ts=document.querySelector(".split-btn");function As(t){const e={};return Object.keys(t).forEach(r=>{const i=r.split("/");let n=e;i.forEach((s,o)=>{s&&(o===i.length-1?n[s]={_isFile:!0,path:r}:(n[s]||(n[s]={_isFolder:!0,children:{},path:i.slice(0,o+1).join("/")}),n[s].children||(n[s].children={}),n=n[s].children))})}),e}function Rs(t,e){t.querySelector(".rename")?.addEventListener("click",async r=>{r.stopPropagation(),Xt&&await Xt(e)}),t.querySelector(".delete")?.addEventListener("click",async r=>{r.stopPropagation(),Qt&&await Qt(e)})}function yi(t,e,r){Object.keys(t).sort((i,n)=>{const s=t[i],o=t[n];return s._isFolder&&!o._isFolder?-1:!s._isFolder&&o._isFolder?1:i.localeCompare(n)}).forEach(i=>{const n=t[i],s=document.createElement("div");if(s.style.paddingLeft=`${r*15}px`,n._isFolder){s.classList.add("folder-item"),s.setAttribute("data-path",n.path),s.setAttribute("draggable","true"),s.innerHTML=`
                <span class="folder-toggle"><i class="material-icons">chevron_right</i></span>
                <i class="material-icons folder-icon">folder</i>
                <span>${i}</span>
                <div class="file-actions">
                   <button class="file-action add-in-folder" title="New File"><i class="material-icons">add</i></button>
                   <button class="file-action rename-folder" title="Rename"><i class="material-icons">edit</i></button>
                   <button class="file-action delete-folder" title="Delete"><i class="material-icons">delete</i></button>
                </div>
            `,s.addEventListener("dragstart",c=>{c.dataTransfer.setData("text/plain",n.path.endsWith("/")?n.path:n.path+"/"),c.stopPropagation()}),s.addEventListener("dragover",c=>{c.preventDefault(),s.classList.add("drag-over")}),s.addEventListener("dragleave",c=>{s.classList.remove("drag-over")}),s.addEventListener("drop",async c=>{c.preventDefault(),s.classList.remove("drag-over");const u=c.dataTransfer.getData("text/plain");if(!u||u===n.path||u===n.path+"/")return;const d=n.path.endsWith("/")?n.path:n.path+"/";if(!u.startsWith(d)&&!u.endsWith(".folder")){if(u.endsWith("/")){Qe(u+".folder",d+u.split("/").slice(-2,-1)[0]+"/.folder");const f=M.getFiles();Object.keys(f).forEach(h=>{if(h.startsWith(u)&&h!==u+".folder"){const E=d+u.split("/").slice(-2,-1)[0]+"/"+h.slice(u.length);Qe(h,E)}})}else{const f=u.split("/").pop();Qe(u,d+f)}te&&te()}});const o=document.createElement("div");o.classList.add("folder-children"),o.style.display="none";const l=s.querySelector(".folder-toggle .material-icons");s.addEventListener("click",c=>{if(!c.target.closest(".file-actions")){const u=o.style.display==="block";o.style.display=u?"none":"block",l.textContent=u?"chevron_right":"expand_more",pe(n.path)}}),s.querySelector(".add-in-folder")?.addEventListener("click",async c=>{c.stopPropagation();const u=await St("New File",`Enter name for new file inside '${i}':`);if(u&&u.trim()!==""){const d=`${n.path}/${u.trim()}`;Ye&&await Ye(d)}}),s.querySelector(".rename-folder")?.addEventListener("click",async c=>{c.stopPropagation();const u=n.path.endsWith("/")?n.path:n.path+"/",d=i,f=u.slice(0,-1).lastIndexOf("/")>=0?u.slice(0,-1).slice(0,u.slice(0,-1).lastIndexOf("/")+1):"",h=await St("Rename Folder",`Enter new name for folder '${d}':`,d);if(!h||h.trim()===""||h===d)return;if(/[<>:"\\|?*]/.test(h)){Q("Error","Invalid folder name.");return}const E=f+h.trim()+"/";De(u+".folder",E+".folder");const T=M.getFiles();Object.keys(T).forEach(v=>{if(v.startsWith(u)&&v!==u+".folder"){const q=E+v.slice(u.length);De(v,q)}}),te&&te(),pe(E)}),s.querySelector(".delete-folder")?.addEventListener("click",async c=>{c.stopPropagation();const u=n.path.endsWith("/")?n.path:n.path+"/";if(!await gi("Delete Folder",`Delete folder '${i}' and all its contents? This cannot be undone.`))return;Si(u);const f=M.getFiles();Object.keys(f).forEach(h=>{h.startsWith(u)&&h!==u+".folder"&&kn(h)}),te&&te()}),yi(n.children,o,r+1),e.appendChild(s),e.appendChild(o)}else n._isFile&&(s.classList.add("file-item"),s.setAttribute("data-path",n.path),s.setAttribute("draggable","true"),s.innerHTML=`
                <i class="material-icons file-icon">description</i>
                <span>${i}</span>
                <div class="file-actions">
                   <button class="file-action rename" title="Rename"><i class="material-icons">edit</i></button>
                   <button class="file-action delete" title="Delete"><i class="material-icons">delete</i></button>
                </div>
            `,s.addEventListener("dragstart",o=>{o.dataTransfer.setData("text/plain",n.path),o.stopPropagation()}),Rs(s,n.path),s.addEventListener("click",o=>{o.target.closest(".file-actions")||(pe(n.path),Zt&&Zt(n.path))}),e.appendChild(s))})}function pe(t){document.querySelectorAll(".file-item, .folder-item").forEach(e=>{e.getAttribute("data-path")===t?e.classList.add("active"):e.classList.remove("active")})}function Ns(t){const e=document.createElement("div");e.classList.add("tab"),e.setAttribute("data-path",t);const r=document.createElement("span");r.textContent=t.split("/").pop(),e.appendChild(r);const i=document.createElement("button");return i.classList.add("close-tab-btn"),i.innerHTML='<i class="material-icons">close</i>',i.title="Close tab",e.appendChild(i),e.addEventListener("click",n=>{n.target.closest(".close-tab-btn")||(Pe(t),pe(t),Ne&&Ne(t))}),i.addEventListener("click",n=>{n.stopPropagation(),Jt&&Jt(t)}),e}function Pe(t){let e=!1;return document.querySelectorAll(".tab").forEach(r=>{r.getAttribute("data-path")===t?(r.classList.add("active"),e=!0):r.classList.remove("active")}),e}function ki(t){if(!Pe(t)){const e=Ns(t);_t.appendChild(e),setTimeout(()=>Pe(t),0)}}function Is(t){const e=_t.querySelector(`.tab[data-path="${t}"]`);e&&e.remove()}function sn(t){if(!t){Ae.textContent="-",ht.textContent="-",bi.textContent="Ln 1, Col 1";return}const e=t.split("/").pop();e.endsWith(".html")?Ae.textContent="HTML":e.endsWith(".css")?Ae.textContent="CSS":e.endsWith(".js")?Ae.textContent="JavaScript":e.endsWith(".json")?Ae.textContent="JSON":e.endsWith(".md")?Ae.textContent="Markdown":Ae.textContent="Text";const r=M.getFile(t)||"",i=new Blob([r]).size;i<1024?ht.textContent=`${i} B`:i<1024*1024?ht.textContent=`${(i/1024).toFixed(1)} KB`:ht.textContent=`${(i/(1024*1024)).toFixed(1)} MB`;const n=localStorage.getItem("coder_tab_size")||"4";Ve.textContent=`Spaces: ${n}`,Je.textContent="0 Problems"}function wi(t,e){bi.textContent=`Ln ${t}, Col ${e}`}function ye(t){if(!Array.isArray(t)||t.length===0){Je.textContent="0 Problems",Je.title="";return}Je.textContent=`${t.length} Problem${t.length>1?"s":""}`,Je.title=t.map(e=>`Line ${e.line}: ${e.type} - ${e.message}`).join(`
`)}function te(){const t=M.getFiles();Xn.innerHTML="";const e=As(t);yi(e,Xn,0);const r=Object.keys(t),i=r.length>0?r[0]:null;!_t.querySelector(".tab")&&i&&ki(i);const n=_t.querySelector(".tab.active"),s=n?n.getAttribute("data-path"):i;s?(pe(s),Pe(s),Ne&&Ne(s)):(pe(null),Pe(null),Ne&&Ne(null)),xi()}function Cs(){const t=localStorage.getItem("coder_theme")||localStorage.getItem("editorTheme")||"atom-one-dark",e=localStorage.getItem("editorFontSize")||"14",r=localStorage.getItem("editorTabSize")||"4",i=localStorage.getItem("gemini-api-key")||"",n=localStorage.getItem("coder_ai_mode")||"ask",s=localStorage.getItem("coder_ai_model")||"gemini-2.5-flash";Vt&&(Vt.value=t),en&&(en.value=e),tn&&(tn.value=r),document.getElementById("gemini-api-key")&&(document.getElementById("gemini-api-key").value=i),nn&&(nn.value=n),rn&&(rn.value=s)}function Ms(){const t=localStorage.getItem("editorFontSize")||"14";document.querySelectorAll(".editor pre code, .line-numbers").forEach(r=>{r.style.fontSize=`${t}px`})}function xi(){const t=localStorage.getItem("editorTabSize")||"4";document.querySelectorAll(".editor pre code").forEach(r=>{r.style.tabSize=t,r.style.MozTabSize=t,Ve&&(Ve.textContent=`Spaces: ${t}`)})}function Ls(){ys?.addEventListener("click",async()=>{const i=await St("New File","Enter the path/name for the new file:");i&&Ye&&await Ye(i)}),ks?.addEventListener("click",()=>{Ht.style.display=Ht.style.display==="none"?"block":"none"}),ws?.addEventListener("click",()=>{Ht.style.display="none"}),Vt?.addEventListener("change",i=>{const n=i.target.value;Yt&&Yt(n),localStorage.setItem("editorTheme",n),localStorage.setItem("coder_theme",n)}),en?.addEventListener("change",i=>{const n=i.target.value;document.querySelectorAll(".editor pre code, .line-numbers").forEach(o=>{o.style.fontSize=`${n}px`}),localStorage.setItem("editorFontSize",n)}),tn?.addEventListener("change",i=>{const n=i.target.value;document.querySelectorAll(".editor pre code").forEach(o=>{o.style.tabSize=n,o.style.MozTabSize=n}),Ve&&(Ve.textContent=`Spaces: ${n}`),localStorage.setItem("editorTabSize",n),xi()}),nn?.addEventListener("change",i=>{localStorage.setItem("coder_ai_mode",i.target.value)}),rn?.addEventListener("change",i=>{localStorage.setItem("coder_ai_model",i.target.value)}),xs?.addEventListener("click",()=>{We.style.display=We.style.display==="none"?"block":"none",We.style.display==="block"&&We.querySelector(".search-input")?.focus()}),Es?.addEventListener("click",()=>{We.style.display="none"}),vs?.addEventListener("click",()=>{Ke.style.display=Ke.style.display==="none"?"block":"none",Ke.style.display==="block"&&Ke.querySelector(".terminal-input")?.focus()}),_s?.addEventListener("click",()=>{Ke.style.display="none"}),Ss?.addEventListener("click",()=>{Q("Not Implemented","File download is not yet implemented.")}),Ts?.addEventListener("click",()=>{Q("Not Implemented","Split editor view is not yet implemented.")});const t=document.getElementById("save-api-key"),e=document.getElementById("gemini-api-key"),r=document.getElementById("toggle-api-key-visibility");t?.addEventListener("click",()=>{const i=e.value.trim();i?(localStorage.setItem("gemini-api-key",i),Q("API Key Saved","Your Gemini API key has been saved locally."),yr(()=>Promise.resolve().then(()=>us),void 0).then(n=>{n.gemini.apiKey=i})):(Q("API Key Cleared","Your Gemini API key has been cleared."),localStorage.removeItem("gemini-api-key"))}),r?.addEventListener("click",()=>{const i=r.querySelector("i");e.type==="password"?(e.type="text",i.textContent="visibility"):(e.type="password",i.textContent="visibility_off")})}const Ie=document.getElementById("linter-panel"),bt=document.getElementById("linter-list"),Qn=document.getElementById("linter-fix-btn"),Os=document.getElementById("linter-close-btn"),Yn=document.querySelector(".lint-status");function ke(t,e){if(!Ie||!bt)return;if(!t||t.length===0){Ie.style.display="none";return}bt.innerHTML="";let r=t.every(i=>i.type==="warning"&&i.message==="Missing semicolon");Qn.style.display=r?"":"none",t.forEach(i=>{const n=document.createElement("li");n.innerHTML=`<span class="lint-icon ${i.type}">${i.type==="error"?"⛔":"⚠️"}</span> Line ${i.line}: <span class="lint-type ${i.type}">${i.type}</span> - <span class="lint-msg">${i.message}</span>`,bt.appendChild(n)}),Ie.style.display="block",Qn.onclick=()=>{e&&e()},Os.onclick=()=>{Ie.style.display="none"}}Yn&&(Yn.onclick=()=>{Ie.style.display==="block"?Ie.style.display="none":bt.childElementCount>0&&(Ie.style.display="block")});function fe(t){return typeof t=="string"&&t.trim()!==""&&!/[<>:"\\|?*]/.test(t)}function Tt(t){return t.split(`
`).map(e=>{const r=e.trim();return!r||r.startsWith("//")?e:/^[^{}\s][^;{}]$/.test(r)&&!r.endsWith(";")?e+";":e}).join(`
`)}async function Ei(t,e="",r={}){if(!fe(t))return{success:!1,error:"Invalid file path."};if(M.getFile(t)!==null)return{success:!1,error:"File already exists."};if(!r.skipDiff)return new Promise(i=>{mi(t,"",e,()=>{if(M.saveFile(t,e),xe(`File created: ${t}`),t.endsWith(".js")){const n=be(e);ye(n),ke(n,async()=>{const s=Tt(e);M.saveFile(t,s);const o=be(s);ye(o),ke(o,null)})}i({success:!0})},()=>{xe(`File creation cancelled: ${t}`,!1),i({success:!1,error:"Change rejected by user."})})});if(M.saveFile(t,e),xe(`File created: ${t}`),t.endsWith(".js")){const i=be(e);ye(i),ke(i,async()=>{const n=Tt(e);M.saveFile(t,n);const s=be(n);ye(s),ke(s,null)})}return{success:!0}}async function $s(t,e,r={}){if(!fe(t))return{success:!1,error:"Invalid file path."};const i=M.getFile(t);if(i===null)return{success:!1,error:"File does not exist."};if(!r.skipDiff)return new Promise(n=>{mi(t,i,e,()=>{if(M.saveFile(t,e),xe(`File modified: ${t}`),t.endsWith(".js")){const s=be(e);ye(s),ke(s,async()=>{const o=Tt(e);M.saveFile(t,o);const l=be(o);ye(l),ke(l,null)})}n({success:!0})},()=>{xe(`File modification cancelled: ${t}`,!1),n({success:!1,error:"Change rejected by user."})})});if(M.saveFile(t,e),xe(`File modified: ${t}`),t.endsWith(".js")){const n=be(e);ye(n),ke(n,async()=>{const s=Tt(e);M.saveFile(t,s);const o=be(s);ye(o),ke(o,null)})}return{success:!0}}function kn(t){return fe(t)?M.deleteFile(t)?(xe(`File deleted: ${t}`),{success:!0}):{success:!1,error:"File not found."}:{success:!1,error:"Invalid file path."}}function De(t,e){return!fe(t)||!fe(e)?{success:!1,error:"Invalid path."}:M.renameFile(t,e)?(xe(`File renamed: ${t} → ${e}`),{success:!0}):{success:!1,error:"Rename failed."}}function Qe(t,e){return De(t,e)}function Bs(t,e){if(!fe(t)||!fe(e))return{success:!1,error:"Invalid path."};const r=M.getFile(t);return r===null?{success:!1,error:"Source file not found."}:M.getFile(e)!==null?{success:!1,error:"Destination already exists."}:(M.saveFile(e,r),{success:!0})}function Fs(t){if(!fe(t))return{success:!1,error:"Invalid folder path."};const e=t.endsWith("/")?t:t+"/";return M.getFile(e+".folder")!==null?{success:!1,error:"Folder already exists."}:(M.saveFile(e+".folder",""),{success:!0})}function Si(t){if(!fe(t))return{success:!1,error:"Invalid folder path."};const e=t.endsWith("/")?t:t+"/";return M.deleteFile(e+".folder")?{success:!0}:{success:!1,error:"Folder not found."}}function zs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jt,Vn;function Ps(){if(Vn)return jt;Vn=1;function t(a){return a instanceof Map?a.clear=a.delete=a.set=function(){throw new Error("map is read-only")}:a instanceof Set&&(a.add=a.clear=a.delete=function(){throw new Error("set is read-only")}),Object.freeze(a),Object.getOwnPropertyNames(a).forEach(p=>{const m=a[p],_=typeof m;(_==="object"||_==="function")&&!Object.isFrozen(m)&&t(m)}),a}class e{constructor(p){p.data===void 0&&(p.data={}),this.data=p.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function r(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function i(a,...p){const m=Object.create(null);for(const _ in a)m[_]=a[_];return p.forEach(function(_){for(const z in _)m[z]=_[z]}),m}const n="</span>",s=a=>!!a.scope,o=(a,{prefix:p})=>{if(a.startsWith("language:"))return a.replace("language:","language-");if(a.includes(".")){const m=a.split(".");return[`${p}${m.shift()}`,...m.map((_,z)=>`${_}${"_".repeat(z+1)}`)].join(" ")}return`${p}${a}`};class l{constructor(p,m){this.buffer="",this.classPrefix=m.classPrefix,p.walk(this)}addText(p){this.buffer+=r(p)}openNode(p){if(!s(p))return;const m=o(p.scope,{prefix:this.classPrefix});this.span(m)}closeNode(p){s(p)&&(this.buffer+=n)}value(){return this.buffer}span(p){this.buffer+=`<span class="${p}">`}}const c=(a={})=>{const p={children:[]};return Object.assign(p,a),p};class u{constructor(){this.rootNode=c(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(p){this.top.children.push(p)}openNode(p){const m=c({scope:p});this.add(m),this.stack.push(m)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(p){return this.constructor._walk(p,this.rootNode)}static _walk(p,m){return typeof m=="string"?p.addText(m):m.children&&(p.openNode(m),m.children.forEach(_=>this._walk(p,_)),p.closeNode(m)),p}static _collapse(p){typeof p!="string"&&p.children&&(p.children.every(m=>typeof m=="string")?p.children=[p.children.join("")]:p.children.forEach(m=>{u._collapse(m)}))}}class d extends u{constructor(p){super(),this.options=p}addText(p){p!==""&&this.add(p)}startScope(p){this.openNode(p)}endScope(){this.closeNode()}__addSublanguage(p,m){const _=p.root;m&&(_.scope=`language:${m}`),this.add(_)}toHTML(){return new l(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(a){return a?typeof a=="string"?a:a.source:null}function h(a){return v("(?=",a,")")}function E(a){return v("(?:",a,")*")}function T(a){return v("(?:",a,")?")}function v(...a){return a.map(m=>f(m)).join("")}function q(a){const p=a[a.length-1];return typeof p=="object"&&p.constructor===Object?(a.splice(a.length-1,1),p):{}}function N(...a){return"("+(q(a).capture?"":"?:")+a.map(_=>f(_)).join("|")+")"}function F(a){return new RegExp(a.toString()+"|").exec("").length-1}function ae(a,p){const m=a&&a.exec(p);return m&&m.index===0}const Y=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function J(a,{joinWith:p}){let m=0;return a.map(_=>{m+=1;const z=m;let P=f(_),k="";for(;P.length>0;){const y=Y.exec(P);if(!y){k+=P;break}k+=P.substring(0,y.index),P=P.substring(y.index+y[0].length),y[0][0]==="\\"&&y[1]?k+="\\"+String(Number(y[1])+z):(k+=y[0],y[0]==="("&&m++)}return k}).map(_=>`(${_})`).join(p)}const W=/\b\B/,V="[a-zA-Z]\\w*",Le="[a-zA-Z_]\\w*",tt="\\b\\d+(\\.\\d+)?",nt="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",it="\\b(0b[01]+)",Ct="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Mt=(a={})=>{const p=/^#![ ]*\//;return a.binary&&(a.begin=v(p,/.*\b/,a.binary,/\b.*/)),i({scope:"meta",begin:p,end:/$/,relevance:0,"on:begin":(m,_)=>{m.index!==0&&_.ignoreMatch()}},a)},Se={begin:"\\\\[\\s\\S]",relevance:0},Lt={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Se]},rt={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Se]},Ot={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},j=function(a,p,m={}){const _=i({scope:"comment",begin:a,end:p,contains:[]},m);_.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const z=N("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return _.contains.push({begin:v(/[ ]+/,"(",z,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),_},he=j("//","$"),ve=j("/\\*","\\*/"),Oe=j("#","$"),qe={scope:"number",begin:tt,relevance:0},st={scope:"number",begin:nt,relevance:0},Ai={scope:"number",begin:it,relevance:0},Ri={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Se,{begin:/\[/,end:/\]/,relevance:0,contains:[Se]}]},Ni={scope:"title",begin:V,relevance:0},Ii={scope:"title",begin:Le,relevance:0},Ci={begin:"\\.\\s*"+Le,relevance:0};var ot=Object.freeze({__proto__:null,APOS_STRING_MODE:Lt,BACKSLASH_ESCAPE:Se,BINARY_NUMBER_MODE:Ai,BINARY_NUMBER_RE:it,COMMENT:j,C_BLOCK_COMMENT_MODE:ve,C_LINE_COMMENT_MODE:he,C_NUMBER_MODE:st,C_NUMBER_RE:nt,END_SAME_AS_BEGIN:function(a){return Object.assign(a,{"on:begin":(p,m)=>{m.data._beginMatch=p[1]},"on:end":(p,m)=>{m.data._beginMatch!==p[1]&&m.ignoreMatch()}})},HASH_COMMENT_MODE:Oe,IDENT_RE:V,MATCH_NOTHING_RE:W,METHOD_GUARD:Ci,NUMBER_MODE:qe,NUMBER_RE:tt,PHRASAL_WORDS_MODE:Ot,QUOTE_STRING_MODE:rt,REGEXP_MODE:Ri,RE_STARTERS_RE:Ct,SHEBANG:Mt,TITLE_MODE:Ni,UNDERSCORE_IDENT_RE:Le,UNDERSCORE_TITLE_MODE:Ii});function Mi(a,p){a.input[a.index-1]==="."&&p.ignoreMatch()}function Li(a,p){a.className!==void 0&&(a.scope=a.className,delete a.className)}function Oi(a,p){p&&a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",a.__beforeBegin=Mi,a.keywords=a.keywords||a.beginKeywords,delete a.beginKeywords,a.relevance===void 0&&(a.relevance=0))}function $i(a,p){Array.isArray(a.illegal)&&(a.illegal=N(...a.illegal))}function Bi(a,p){if(a.match){if(a.begin||a.end)throw new Error("begin & end are not supported with match");a.begin=a.match,delete a.match}}function Fi(a,p){a.relevance===void 0&&(a.relevance=1)}const zi=(a,p)=>{if(!a.beforeMatch)return;if(a.starts)throw new Error("beforeMatch cannot be used with starts");const m=Object.assign({},a);Object.keys(a).forEach(_=>{delete a[_]}),a.keywords=m.keywords,a.begin=v(m.beforeMatch,h(m.begin)),a.starts={relevance:0,contains:[Object.assign(m,{endsParent:!0})]},a.relevance=0,delete m.beforeMatch},Pi=["of","and","for","in","not","or","if","then","parent","list","value"],Di="keyword";function vn(a,p,m=Di){const _=Object.create(null);return typeof a=="string"?z(m,a.split(" ")):Array.isArray(a)?z(m,a):Object.keys(a).forEach(function(P){Object.assign(_,vn(a[P],p,P))}),_;function z(P,k){p&&(k=k.map(y=>y.toLowerCase())),k.forEach(function(y){const S=y.split("|");_[S[0]]=[P,qi(S[0],S[1])]})}}function qi(a,p){return p?Number(p):Ui(a)?0:1}function Ui(a){return Pi.includes(a.toLowerCase())}const _n={},_e=a=>{console.error(a)},Tn=(a,...p)=>{console.log(`WARN: ${a}`,...p)},$e=(a,p)=>{_n[`${a}/${p}`]||(console.log(`Deprecated as of ${a}. ${p}`),_n[`${a}/${p}`]=!0)},at=new Error;function An(a,p,{key:m}){let _=0;const z=a[m],P={},k={};for(let y=1;y<=p.length;y++)k[y+_]=z[y],P[y+_]=!0,_+=F(p[y-1]);a[m]=k,a[m]._emit=P,a[m]._multi=!0}function Hi(a){if(Array.isArray(a.begin)){if(a.skip||a.excludeBegin||a.returnBegin)throw _e("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),at;if(typeof a.beginScope!="object"||a.beginScope===null)throw _e("beginScope must be object"),at;An(a,a.begin,{key:"beginScope"}),a.begin=J(a.begin,{joinWith:""})}}function ji(a){if(Array.isArray(a.end)){if(a.skip||a.excludeEnd||a.returnEnd)throw _e("skip, excludeEnd, returnEnd not compatible with endScope: {}"),at;if(typeof a.endScope!="object"||a.endScope===null)throw _e("endScope must be object"),at;An(a,a.end,{key:"endScope"}),a.end=J(a.end,{joinWith:""})}}function Gi(a){a.scope&&typeof a.scope=="object"&&a.scope!==null&&(a.beginScope=a.scope,delete a.scope)}function Wi(a){Gi(a),typeof a.beginScope=="string"&&(a.beginScope={_wrap:a.beginScope}),typeof a.endScope=="string"&&(a.endScope={_wrap:a.endScope}),Hi(a),ji(a)}function Ki(a){function p(k,y){return new RegExp(f(k),"m"+(a.case_insensitive?"i":"")+(a.unicodeRegex?"u":"")+(y?"g":""))}class m{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(y,S){S.position=this.position++,this.matchIndexes[this.matchAt]=S,this.regexes.push([S,y]),this.matchAt+=F(y)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const y=this.regexes.map(S=>S[1]);this.matcherRe=p(J(y,{joinWith:"|"}),!0),this.lastIndex=0}exec(y){this.matcherRe.lastIndex=this.lastIndex;const S=this.matcherRe.exec(y);if(!S)return null;const H=S.findIndex((Ue,Bt)=>Bt>0&&Ue!==void 0),D=this.matchIndexes[H];return S.splice(0,H),Object.assign(S,D)}}class _{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(y){if(this.multiRegexes[y])return this.multiRegexes[y];const S=new m;return this.rules.slice(y).forEach(([H,D])=>S.addRule(H,D)),S.compile(),this.multiRegexes[y]=S,S}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(y,S){this.rules.push([y,S]),S.type==="begin"&&this.count++}exec(y){const S=this.getMatcher(this.regexIndex);S.lastIndex=this.lastIndex;let H=S.exec(y);if(this.resumingScanAtSamePosition()&&!(H&&H.index===this.lastIndex)){const D=this.getMatcher(0);D.lastIndex=this.lastIndex+1,H=D.exec(y)}return H&&(this.regexIndex+=H.position+1,this.regexIndex===this.count&&this.considerAll()),H}}function z(k){const y=new _;return k.contains.forEach(S=>y.addRule(S.begin,{rule:S,type:"begin"})),k.terminatorEnd&&y.addRule(k.terminatorEnd,{type:"end"}),k.illegal&&y.addRule(k.illegal,{type:"illegal"}),y}function P(k,y){const S=k;if(k.isCompiled)return S;[Li,Bi,Wi,zi].forEach(D=>D(k,y)),a.compilerExtensions.forEach(D=>D(k,y)),k.__beforeBegin=null,[Oi,$i,Fi].forEach(D=>D(k,y)),k.isCompiled=!0;let H=null;return typeof k.keywords=="object"&&k.keywords.$pattern&&(k.keywords=Object.assign({},k.keywords),H=k.keywords.$pattern,delete k.keywords.$pattern),H=H||/\w+/,k.keywords&&(k.keywords=vn(k.keywords,a.case_insensitive)),S.keywordPatternRe=p(H,!0),y&&(k.begin||(k.begin=/\B|\b/),S.beginRe=p(S.begin),!k.end&&!k.endsWithParent&&(k.end=/\B|\b/),k.end&&(S.endRe=p(S.end)),S.terminatorEnd=f(S.end)||"",k.endsWithParent&&y.terminatorEnd&&(S.terminatorEnd+=(k.end?"|":"")+y.terminatorEnd)),k.illegal&&(S.illegalRe=p(k.illegal)),k.contains||(k.contains=[]),k.contains=[].concat(...k.contains.map(function(D){return Zi(D==="self"?k:D)})),k.contains.forEach(function(D){P(D,S)}),k.starts&&P(k.starts,y),S.matcher=z(S),S}if(a.compilerExtensions||(a.compilerExtensions=[]),a.contains&&a.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return a.classNameAliases=i(a.classNameAliases||{}),P(a)}function Rn(a){return a?a.endsWithParent||Rn(a.starts):!1}function Zi(a){return a.variants&&!a.cachedVariants&&(a.cachedVariants=a.variants.map(function(p){return i(a,{variants:null},p)})),a.cachedVariants?a.cachedVariants:Rn(a)?i(a,{starts:a.starts?i(a.starts):null}):Object.isFrozen(a)?i(a):a}var Ji="11.11.1";class Xi extends Error{constructor(p,m){super(p),this.name="HTMLInjectionError",this.html=m}}const $t=r,Nn=i,In=Symbol("nomatch"),Qi=7,Cn=function(a){const p=Object.create(null),m=Object.create(null),_=[];let z=!0;const P="Could not find the language '{}', did you forget to load/include a language module?",k={disableAutodetect:!0,name:"Plain text",contains:[]};let y={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:d};function S(g){return y.noHighlightRe.test(g)}function H(g){let x=g.className+" ";x+=g.parentNode?g.parentNode.className:"";const I=y.languageDetectRe.exec(x);if(I){const $=ge(I[1]);return $||(Tn(P.replace("{}",I[1])),Tn("Falling back to no-highlight mode for this block.",g)),$?I[1]:"no-highlight"}return x.split(/\s+/).find($=>S($)||ge($))}function D(g,x,I){let $="",U="";typeof x=="object"?($=g,I=x.ignoreIllegals,U=x.language):($e("10.7.0","highlight(lang, code, ...args) has been deprecated."),$e("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),U=g,$=x),I===void 0&&(I=!0);const ee={code:$,language:U};ct("before:highlight",ee);const me=ee.result?ee.result:Ue(ee.language,ee.code,I);return me.code=ee.code,ct("after:highlight",me),me}function Ue(g,x,I,$){const U=Object.create(null);function ee(b,w){return b.keywords[w]}function me(){if(!A.keywords){G.addText(B);return}let b=0;A.keywordPatternRe.lastIndex=0;let w=A.keywordPatternRe.exec(B),R="";for(;w;){R+=B.substring(b,w.index);const O=re.case_insensitive?w[0].toLowerCase():w[0],K=ee(A,O);if(K){const[le,hr]=K;if(G.addText(R),R="",U[O]=(U[O]||0)+1,U[O]<=Qi&&(pt+=hr),le.startsWith("_"))R+=w[0];else{const gr=re.classNameAliases[le]||le;ie(w[0],gr)}}else R+=w[0];b=A.keywordPatternRe.lastIndex,w=A.keywordPatternRe.exec(B)}R+=B.substring(b),G.addText(R)}function ut(){if(B==="")return;let b=null;if(typeof A.subLanguage=="string"){if(!p[A.subLanguage]){G.addText(B);return}b=Ue(A.subLanguage,B,!0,Pn[A.subLanguage]),Pn[A.subLanguage]=b._top}else b=Ft(B,A.subLanguage.length?A.subLanguage:null);A.relevance>0&&(pt+=b.relevance),G.__addSublanguage(b._emitter,b.language)}function X(){A.subLanguage!=null?ut():me(),B=""}function ie(b,w){b!==""&&(G.startScope(w),G.addText(b),G.endScope())}function $n(b,w){let R=1;const O=w.length-1;for(;R<=O;){if(!b._emit[R]){R++;continue}const K=re.classNameAliases[b[R]]||b[R],le=w[R];K?ie(le,K):(B=le,me(),B=""),R++}}function Bn(b,w){return b.scope&&typeof b.scope=="string"&&G.openNode(re.classNameAliases[b.scope]||b.scope),b.beginScope&&(b.beginScope._wrap?(ie(B,re.classNameAliases[b.beginScope._wrap]||b.beginScope._wrap),B=""):b.beginScope._multi&&($n(b.beginScope,w),B="")),A=Object.create(b,{parent:{value:A}}),A}function Fn(b,w,R){let O=ae(b.endRe,R);if(O){if(b["on:end"]){const K=new e(b);b["on:end"](w,K),K.isMatchIgnored&&(O=!1)}if(O){for(;b.endsParent&&b.parent;)b=b.parent;return b}}if(b.endsWithParent)return Fn(b.parent,w,R)}function cr(b){return A.matcher.regexIndex===0?(B+=b[0],1):(qt=!0,0)}function ur(b){const w=b[0],R=b.rule,O=new e(R),K=[R.__beforeBegin,R["on:begin"]];for(const le of K)if(le&&(le(b,O),O.isMatchIgnored))return cr(w);return R.skip?B+=w:(R.excludeBegin&&(B+=w),X(),!R.returnBegin&&!R.excludeBegin&&(B=w)),Bn(R,b),R.returnBegin?0:w.length}function dr(b){const w=b[0],R=x.substring(b.index),O=Fn(A,b,R);if(!O)return In;const K=A;A.endScope&&A.endScope._wrap?(X(),ie(w,A.endScope._wrap)):A.endScope&&A.endScope._multi?(X(),$n(A.endScope,b)):K.skip?B+=w:(K.returnEnd||K.excludeEnd||(B+=w),X(),K.excludeEnd&&(B=w));do A.scope&&G.closeNode(),!A.skip&&!A.subLanguage&&(pt+=A.relevance),A=A.parent;while(A!==O.parent);return O.starts&&Bn(O.starts,b),K.returnEnd?0:w.length}function pr(){const b=[];for(let w=A;w!==re;w=w.parent)w.scope&&b.unshift(w.scope);b.forEach(w=>G.openNode(w))}let dt={};function zn(b,w){const R=w&&w[0];if(B+=b,R==null)return X(),0;if(dt.type==="begin"&&w.type==="end"&&dt.index===w.index&&R===""){if(B+=x.slice(w.index,w.index+1),!z){const O=new Error(`0 width match regex (${g})`);throw O.languageName=g,O.badRule=dt.rule,O}return 1}if(dt=w,w.type==="begin")return ur(w);if(w.type==="illegal"&&!I){const O=new Error('Illegal lexeme "'+R+'" for mode "'+(A.scope||"<unnamed>")+'"');throw O.mode=A,O}else if(w.type==="end"){const O=dr(w);if(O!==In)return O}if(w.type==="illegal"&&R==="")return B+=`
`,1;if(Dt>1e5&&Dt>w.index*3)throw new Error("potential infinite loop, way more iterations than matches");return B+=R,R.length}const re=ge(g);if(!re)throw _e(P.replace("{}",g)),new Error('Unknown language: "'+g+'"');const fr=Ki(re);let Pt="",A=$||fr;const Pn={},G=new y.__emitter(y);pr();let B="",pt=0,Te=0,Dt=0,qt=!1;try{if(re.__emitTokens)re.__emitTokens(x,G);else{for(A.matcher.considerAll();;){Dt++,qt?qt=!1:A.matcher.considerAll(),A.matcher.lastIndex=Te;const b=A.matcher.exec(x);if(!b)break;const w=x.substring(Te,b.index),R=zn(w,b);Te=b.index+R}zn(x.substring(Te))}return G.finalize(),Pt=G.toHTML(),{language:g,value:Pt,relevance:pt,illegal:!1,_emitter:G,_top:A}}catch(b){if(b.message&&b.message.includes("Illegal"))return{language:g,value:$t(x),illegal:!0,relevance:0,_illegalBy:{message:b.message,index:Te,context:x.slice(Te-100,Te+100),mode:b.mode,resultSoFar:Pt},_emitter:G};if(z)return{language:g,value:$t(x),illegal:!1,relevance:0,errorRaised:b,_emitter:G,_top:A};throw b}}function Bt(g){const x={value:$t(g),illegal:!1,relevance:0,_top:k,_emitter:new y.__emitter(y)};return x._emitter.addText(g),x}function Ft(g,x){x=x||y.languages||Object.keys(p);const I=Bt(g),$=x.filter(ge).filter(On).map(X=>Ue(X,g,!1));$.unshift(I);const U=$.sort((X,ie)=>{if(X.relevance!==ie.relevance)return ie.relevance-X.relevance;if(X.language&&ie.language){if(ge(X.language).supersetOf===ie.language)return 1;if(ge(ie.language).supersetOf===X.language)return-1}return 0}),[ee,me]=U,ut=ee;return ut.secondBest=me,ut}function Yi(g,x,I){const $=x&&m[x]||I;g.classList.add("hljs"),g.classList.add(`language-${$}`)}function zt(g){let x=null;const I=H(g);if(S(I))return;if(ct("before:highlightElement",{el:g,language:I}),g.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",g);return}if(g.children.length>0&&(y.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(g)),y.throwUnescapedHTML))throw new Xi("One of your code blocks includes unescaped HTML.",g.innerHTML);x=g;const $=x.textContent,U=I?D($,{language:I,ignoreIllegals:!0}):Ft($);g.innerHTML=U.value,g.dataset.highlighted="yes",Yi(g,I,U.language),g.result={language:U.language,re:U.relevance,relevance:U.relevance},U.secondBest&&(g.secondBest={language:U.secondBest.language,relevance:U.secondBest.relevance}),ct("after:highlightElement",{el:g,result:U,text:$})}function Vi(g){y=Nn(y,g)}const er=()=>{lt(),$e("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function tr(){lt(),$e("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Mn=!1;function lt(){function g(){lt()}if(document.readyState==="loading"){Mn||window.addEventListener("DOMContentLoaded",g,!1),Mn=!0;return}document.querySelectorAll(y.cssSelector).forEach(zt)}function nr(g,x){let I=null;try{I=x(a)}catch($){if(_e("Language definition for '{}' could not be registered.".replace("{}",g)),z)_e($);else throw $;I=k}I.name||(I.name=g),p[g]=I,I.rawDefinition=x.bind(null,a),I.aliases&&Ln(I.aliases,{languageName:g})}function ir(g){delete p[g];for(const x of Object.keys(m))m[x]===g&&delete m[x]}function rr(){return Object.keys(p)}function ge(g){return g=(g||"").toLowerCase(),p[g]||p[m[g]]}function Ln(g,{languageName:x}){typeof g=="string"&&(g=[g]),g.forEach(I=>{m[I.toLowerCase()]=x})}function On(g){const x=ge(g);return x&&!x.disableAutodetect}function sr(g){g["before:highlightBlock"]&&!g["before:highlightElement"]&&(g["before:highlightElement"]=x=>{g["before:highlightBlock"](Object.assign({block:x.el},x))}),g["after:highlightBlock"]&&!g["after:highlightElement"]&&(g["after:highlightElement"]=x=>{g["after:highlightBlock"](Object.assign({block:x.el},x))})}function or(g){sr(g),_.push(g)}function ar(g){const x=_.indexOf(g);x!==-1&&_.splice(x,1)}function ct(g,x){const I=g;_.forEach(function($){$[I]&&$[I](x)})}function lr(g){return $e("10.7.0","highlightBlock will be removed entirely in v12.0"),$e("10.7.0","Please use highlightElement now."),zt(g)}Object.assign(a,{highlight:D,highlightAuto:Ft,highlightAll:lt,highlightElement:zt,highlightBlock:lr,configure:Vi,initHighlighting:er,initHighlightingOnLoad:tr,registerLanguage:nr,unregisterLanguage:ir,listLanguages:rr,getLanguage:ge,registerAliases:Ln,autoDetection:On,inherit:Nn,addPlugin:or,removePlugin:ar}),a.debugMode=function(){z=!1},a.safeMode=function(){z=!0},a.versionString=Ji,a.regex={concat:v,lookahead:h,either:N,optional:T,anyNumberOfTimes:E};for(const g in ot)typeof ot[g]=="object"&&t(ot[g]);return Object.assign(a,ot),a},Be=Cn({});return Be.newInstance=()=>Cn({}),jt=Be,Be.HighlightJS=Be,Be.default=Be,jt}var Ds=Ps();const Ee=zs(Ds),ei="[A-Za-z$_][0-9A-Za-z$_]*",qs=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],Us=["true","false","null","undefined","NaN","Infinity"],vi=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],_i=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ti=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Hs=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],js=[].concat(Ti,vi,_i);function Gs(t){const e=t.regex,r=(j,{after:he})=>{const ve="</"+j[0].slice(1);return j.input.indexOf(ve,he)!==-1},i=ei,n={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(j,he)=>{const ve=j[0].length+j.index,Oe=j.input[ve];if(Oe==="<"||Oe===","){he.ignoreMatch();return}Oe===">"&&(r(j,{after:ve})||he.ignoreMatch());let qe;const st=j.input.substring(ve);if(qe=st.match(/^\s*=/)){he.ignoreMatch();return}if((qe=st.match(/^\s+extends\s+/))&&qe.index===0){he.ignoreMatch();return}}},l={$pattern:ei,keyword:qs,literal:Us,built_in:js,"variable.language":Hs},c="[0-9](_?[0-9])*",u=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},E={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},T={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},q={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,h]},F={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},ae=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,E,T,v,q,{match:/\$\d+/},f];h.contains=ae.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(ae)});const Y=[].concat(F,h.contains),J=Y.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(Y)}]),W={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:J},V={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},Le={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...vi,..._i]}},tt={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},nt={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[W],illegal:/%/},it={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Ct(j){return e.concat("(?!",j.join("|"),")")}const Mt={match:e.concat(/\b/,Ct([...Ti,"super","import"].map(j=>`${j}\\s*\\(`)),i,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},Se={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Lt={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},W]},rt="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",Ot={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(rt)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[W]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:J,CLASS_REFERENCE:Le},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),tt,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,E,T,v,q,F,{match:/\$\d+/},f,Le,{scope:"attr",match:i+e.lookahead(":"),relevance:0},Ot,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[F,t.REGEXP_MODE,{className:"function",begin:rt,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:J}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:n.begin,end:n.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},nt,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[W,t.inherit(t.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},Se,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[W]},Mt,it,V,Lt,{match:/\$[(.]/}]}}function Ws(t){const e=t.regex,r=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,n={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=t.inherit(s,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),c=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[n]},{begin:/'/,end:/'/,contains:[n]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,c,l,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,o,c,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},n,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(r,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:r,relevance:0,starts:u}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(r,/>/))),contains:[{className:"name",begin:r,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const Ks=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Zs=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Js=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Xs=[...Zs,...Js],Qs=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Ys=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Vs=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),eo=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function to(t){const e=t.regex,r=Ks(t),i={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},n="and or not only",s=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",l=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[r.BLOCK_COMMENT,i,r.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},r.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Ys.join("|")+")"},{begin:":(:)?("+Vs.join("|")+")"}]},r.CSS_VARIABLE,{className:"attribute",begin:"\\b("+eo.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[r.BLOCK_COMMENT,r.HEXCOLOR,r.IMPORTANT,r.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},r.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:n,attribute:Qs.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,r.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+Xs.join("|")+")\\b"}]}}function no(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},r={match:/[{}[\],:]/,className:"punctuation",relevance:0},i=["true","false","null"],n={scope:"literal",beginKeywords:i.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:i},contains:[e,r,t.QUOTE_STRING_MODE,n,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function io(t){const e=t.regex,r={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},n={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=t.inherit(u,{contains:[]}),h=t.inherit(d,{contains:[]});u.contains.push(h),d.contains.push(f);let E=[r,c];return[u,d,f,h].forEach(N=>{N.contains=N.contains.concat(E)}),E=E.concat(u,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:E},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:E}]}]},r,s,u,d,{className:"quote",begin:"^>\\s+",contains:E,end:"$"},n,i,c,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}Ee.registerLanguage("javascript",Gs);Ee.registerLanguage("xml",Ws);Ee.registerLanguage("css",to);Ee.registerLanguage("json",no);Ee.registerLanguage("markdown",io);let wn=()=>console.warn("saveCurrentFile not set in editor.js");function ro(t){wn=t.saveCurrentFile}const xn=document.querySelectorAll(".editor-pane"),ti=document.querySelector(".preview-button");let ne=document.querySelector(".editor-pane.active")||xn[0];ne.classList.contains("active")||ne.classList.add("active");function ni(t,e){if(!t){console.error("updateEditorPane called with null or undefined pane.");return}t.dataset.filePath=e;const r=t.querySelector(".editor pre code"),i=t.querySelector(".line-numbers");if(!r||!i){console.error("Editor code or line number element not found in pane:",t);return}let n="plaintext",s="";if(e){s=M.getFile(e),s===null&&(console.warn(`File content not found for path: ${e}. Displaying empty.`),s="");const o=e.split("/").pop();o.endsWith(".html")?n="html":o.endsWith(".css")?n="css":o.endsWith(".js")?n="javascript":o.endsWith(".json")?n="json":o.endsWith(".md")&&(n="markdown")}if(r.textContent=s,r.className=`language-${n}`,typeof Ee<"u"&&Ee.highlightElement){delete r.dataset.highlighted;try{Ee.highlightElement(r)}catch(o){console.error("Highlight.js error:",o)}}En(t,i,r)}function En(t,e,r){if(!e||!r)return;const i=r.textContent.split(`
`),n=i.length>0?i.length:1,s=document.createDocumentFragment();for(let l=1;l<=n;l++){const c=document.createElement("div");c.textContent=String(l),s.appendChild(c)}e.innerHTML="",e.appendChild(s);const o=r.closest("pre");o&&o.addEventListener("scroll",()=>{e.scrollTop=o.scrollTop})}function At(t){if(!ne&&(console.error("No active editor pane found."),ne=xn[0],!ne))return;if(!t){console.log("No file selected. Clearing editor."),ni(ne,null),sn(null),wi(1,1);return}ni(ne,t),sn(t);const e=ne.querySelector("pre code");e&&on(e)}function so(t,e){t.preventDefault();const r=parseInt(localStorage.getItem("coder_tab_size")||"4"),i=" ".repeat(r),n=window.getSelection();if(!n||n.rangeCount===0)return;const s=n.getRangeAt(0),o=document.createTextNode(i);s.insertNode(o),s.setStartAfter(o),s.setEndAfter(o),n.removeAllRanges(),n.addRange(s),wn();const l=t.target.closest(".editor-pane");En(l,l.querySelector(".line-numbers"),e)}function on(t){if(!t)return;const e=window.getSelection();let r=1,i=1;if(e&&e.rangeCount>0){const n=e.getRangeAt(0);if(t.contains(n.startContainer)&&t.contains(n.endContainer)){const s=n.cloneRange();s.selectNodeContents(t),s.setEnd(n.startContainer,n.startOffset);const l=s.toString().split(`
`);r=l.length,i=l[l.length-1].length+1}}wi(r,i)}function oo(){const t=document.body,e=localStorage.getItem("coder_theme")||"atom-one-dark";e==="coder-light"||e==="github"?t.classList.add("light-theme"):t.classList.remove("light-theme")}async function ao(t){if(!t||!t.endsWith(".html")){Q("Preview Error","Please open and select an HTML file first.");return}let e=M.getFile(t);if(e===null){Q("Preview Error","Could not load file content for preview.");return}const r=`
        <script>(function() {
            window.fileStorageFiles = JSON.parse(localStorage.getItem('coder_files') || '{}');
            function fetchFile(path) {
                return window.fileStorageFiles[path] || '';
            }
            function handleNav(e) {
                let t = e.target;
                while (t && t.tagName !== 'A') t = t.parentElement;
                if (t && t.tagName === 'A' && t.getAttribute('href')) {
                    const href = t.getAttribute('href');
                    if (window.fileStorageFiles[href]) {
                        e.preventDefault();
                        document.open();
                        var html = window.fileStorageFiles[href];
                        if (new RegExp('</body>', 'i').test(html)) {
                            html = html.replace(new RegExp('</body>', 'i'), injectedScript + '</body>');
                        } else {
                            html += injectedScript;
                        }
                        document.write(html);
                        document.close();
                    }
                }
            }
            document.addEventListener('click', handleNav, true);
            // Intercept resource loading (CSS/JS/images)
            const origCreateElement = document.createElement;
            document.createElement = function(tag) {
                const el = origCreateElement.call(document, tag);
                if (tag === 'script' || tag === 'link' || tag === 'img') {
                    setTimeout(() => {
                        if (tag === 'script' && el.src && window.fileStorageFiles[el.src]) {
                            el.text = window.fileStorageFiles[el.src];
                            el.removeAttribute('src');
                        }
                        if (tag === 'link' && el.href && window.fileStorageFiles[el.href]) {
                            const style = document.createElement('style');
                            style.textContent = window.fileStorageFiles[el.href];
                            el.parentNode && el.parentNode.replaceChild(style, el);
                        }
                        if (tag === 'img' && el.src && window.fileStorageFiles[el.src]) {
                            el.src = 'data:image/*;base64,' + btoa(window.fileStorageFiles[el.src]);
                        }
                    }, 0);
                }
                return el;
            };
        })();<\/script>
    `;new RegExp("</body>","i").test(e)?e=e.replace(new RegExp("</body>","i"),r+"</body>"):e+=r;const i=window.open("","_blank");i.document.open(),i.document.write(e),i.document.close()}function lo(){xn.forEach(t=>{const e=t.querySelector("pre code"),r=t.querySelector(".line-numbers");if(!e||!r){console.warn("Skipping event listeners for pane due to missing elements:",t);return}e.addEventListener("input",()=>{t===ne&&wn(),En(t,r,e)}),e.addEventListener("keydown",i=>{i.key==="Tab"&&so(i,e)}),e.addEventListener("click",()=>on(e)),e.addEventListener("keyup",i=>{!i.metaKey&&!i.ctrlKey&&!i.altKey&&i.key!=="Shift"&&on(e)})}),ti?ti.addEventListener("click",()=>{const t=ne?ne.dataset.filePath:null;t?ao(t):Q("Preview Error","No file is active in the editor.")}):console.warn("Preview button not found.")}function Rt(t){ki(t),pe(t),At(t)}function Sn(t){const e=document.querySelectorAll(".tab"),r=document.querySelector(".tabs-container");let i=r.querySelector(`.tab[data-path="${t}"]`),n=null;if(!i)return;const s=i.classList.contains("active"),o=Array.from(e).indexOf(i);if(Is(t),s){const l=r.querySelectorAll(".tab");if(l.length>0){const c=Math.max(0,o-1);l[c]&&(n=l[c].getAttribute("data-path"))}n?(Pe(n),pe(n),At(n)):(At(null),pe(null))}}async function co(t){if(!t||!t.trim()){Q("Error","File path cannot be empty.");return}t=t.trim();const e=await Ei(t);if(!e.success){Q("Error",e.error);return}te(),Rt(t)}async function uo(t){const e=t.split("/").pop(),r=t.substring(0,t.lastIndexOf("/")),i=await St("Rename File",`Enter new name for ${e}:`,e);if(i&&i.trim()!==""&&i!==e){const n=r?`${r}/${i.trim()}`:i.trim(),s=De(t,n);if(!s.success){Q("Error",s.error);return}Sn(t),te(),Rt(n)}}async function po(t){const e=t.split("/").pop();if(await gi("Delete File",`Are you sure you want to delete "${e}"? This cannot be undone.`)){const i=kn(t);if(!i.success){Q("Error",i.error);return}Sn(t),te()}}function fo(){const t=document.querySelector(".tab.active"),e=document.querySelector(".editor-pane.active")||document.querySelector(".editor-pane:first-child");if(!t||!e)return;const r=t.getAttribute("data-path"),i=e.querySelector(".editor pre code");if(!i){console.error("Save attempt failed: Could not find code element in active pane.");return}const n=i.textContent;r?(M.saveFile(r,n),sn(r)):console.warn("Save attempt failed: Active tab has no file path.")}document.addEventListener("DOMContentLoaded",()=>{console.log("Coder App Initializing..."),ro({saveCurrentFile:fo}),bs({selectFile:Rt,closeTab:Sn,addNewFile:co,renameFileHandler:uo,deleteFileHandler:po,updateEditor:At}),ds({initializeUI:te,selectFile:Rt}),kr(),te(),oo(),Ms(),Cs(),Ls(),lo(),ms(),console.log("Coder App Initialized.")});
